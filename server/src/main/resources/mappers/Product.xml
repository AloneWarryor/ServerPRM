<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fpt.prm.mapper.ProductMapper">

<select id="getAllProductActive" resultType="com.fpt.prm.model.Product">
SELECT *
FROM product
WHERE product.status = 1
</select>

<select id="getAllProductActiveByTypeId" parameterType="Integer" resultType="com.fpt.prm.model.Product">
SELECT *
FROM product
WHERE product.status = 1 AND product.typeID = #{typeId}
</select>

<select id="getAllProductActiveByKey" parameterType="String" resultType="com.fpt.prm.model.Product">
SELECT *
FROM product
WHERE product.status = 1 AND product.productName = #{searchKey}
</select>

<select id="getAllProductActiveByKeyAndLocation" parameterType="Map" resultType="com.fpt.prm.model.Product">
SELECT *
FROM product
WHERE product.status = 1 AND product.productName = #{searchKey} AND product.typeID = #{typeID}
</select>

<select id="getProductByID" parameterType="Integer" resultType="com.fpt.prm.model.Product">
SELECT *
FROM product
WHERE product.productID = #{productId}
</select>

<select id="getProductPicByID" parameterType="Integer" resultType="com.fpt.prm.model.Image">
SELECT *
FROM image
WHERE image.productID = #{productId}
</select>

<insert id="addImage" parameterType="com.fpt.prm.model.Image">
    INSERT INTO `cho_tot`.`image`
(`productID`,
`image`,
`createdDate`,
`updatedDate`,
`createdUser`,
`updatedUser`)
VALUES
(#{productID},
#{image},
#{createdDate},
#{updatedDate},
#{createdUser},
#{updatedUser});

</insert>

<insert id="createNewProduct" parameterType="com.fpt.prm.model.Product" useGeneratedKeys="true" keyProperty="productID" keyColumn="productID">
   INSERT INTO `cho_tot`.`product`
(`productName`,
`typeID`,
`price`,
`userName`,
`description`,
`image`,
`status`,
`addressID`,
`priority`,
`numberOfDaysPriority`,
`createdDate`,
`updatedDate`,
`createdUser`,
`updatedUser`)
VALUES
#{productName},
#{typeID},
#{price},
#{userName},
#{description},
#{image},
#{status},
#{addressID},
#{priority},
#{numberOfDaysPriority},
#{createdDate},
#{updatedDate},
#{createdUser},
#{updatedUser});


</insert>

</mapper>